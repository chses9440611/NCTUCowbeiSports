<div class="container">
	<table class="table table-hover w-50 mx-auto">
		<thead>
			<tr>
				<th class="text-center" colspan="3">公告列表</th>
				<th>
					<% if is_admin==true %>
						<%= link_to "新增公告", new_announcement_path, class: "btn btn-outline-secondary"%>
					<% end %>
				</th>

			</tr>

		</thead>

		<tbody>
			<% anncs.each do |annc| %>
				<tr>
					<td>
						<%= annc.created_at.strftime("%Y-%m-%D")%>
					</td>
					
					<td>
						<%= link_to (annc.title or "Null"), modal_announcement_path(annc), data: {target: "#contentModal", toggle: "modal"}%>
					</td>
					
					<td>	
						<button type="button" class="btn btn-success" data-toggle="modal" data-target="#contentModal">
							詳細
						</button>
					</td>
				</tr>
			<% end %>
	</table>
</div>


		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).on('page:change', function(){
	// shims for the Bootstrap Modal, which is bloody-minded about caching content per modal
		$(document).on('click', '#contentModal [data-dismiss="modal"]', function (e) {
			$(e.target).removeData('bs.modal');
			$('#contentModal .modal-content').empty();
		});
	
		$(document).on('click', '[data-target="#contentModal"]', function(e) {
			$("#contentModal .modal-content").load($(this).attr("href", ""));
		});
	});
</script>
